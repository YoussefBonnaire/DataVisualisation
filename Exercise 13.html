<!DOCTYPE html>
<html lang="en">
<script src='https://d3js.org/d3.v7.min.js'></script>
<h1>Exercise 13 (not completed)</h1>
<body>

</body>
<script>
    //Create SVG element
    var svg = d3.select("body")
        .append("svg")
        .attr("width", 600)
        .attr("height", 600)
        .style("border", '1px solid green');
    file = 'exercise 12.csv'

    function Render(d) {
        const shapes = svg.selectAll(d.shape).data([1]);
        if (d.shape === 'rect') {
            shapes
                .enter()
                .append(d.shape)
                .attr('x', d.cx_pos)
                .attr('y', d.cy_pos)
                .attr('width', d.width)
                .attr('height', d.height)
                .attr('fill', d.color);
        }
        if (d.shape === 'circle') {
            shapes
                .enter()
                .append(d.shape)
                .attr("cx", d.cx_pos)
                .attr("cy", d.cy_pos)
                .attr("r", d.width / 2)
                .attr('fill', d.color);
        }
        if (d.shape === 'ellipse') {
            shapes
                .enter()
                .append(d.shape)
                .attr("cx", d.cx_pos)
                .attr("cy", d.cy_pos)
                .attr("rx", d.width)
                .attr("ry", d.height)
                .attr('fill', d.color);
        }
        if (d.shape === 'line') {
            shapes
                .enter()
                .append(d.shape)
                .attr("x1", d.cx_pos)
                .attr("x2", +d.cx_pos + +d.width)
                .attr("y1", d.cy_pos)
                .attr("y2", +d.cy_pos + +d.height)
                .attr('stroke', d.color);
        }
    }

    function Render_Broken(d) {
        const shapes = svg.selectAll(d.shape)
            .data(d);
        shapes
            .enter()
            .append(d.shape)
            .attr('x', d.cx_pos)
            .attr('y', d.cy_pos)
            .attr("cx", d.cx_pos)
            .attr("cy", d.cy_pos)
            .attr("r", d.width / 2)
            .attr("rx", d.width)
            .attr("ry", d.height)
            .attr("x1", d.cx_pos)
            .attr("x2", +d.cx_pos + +d.width)
            .attr("y1", d.cy_pos)
            .attr("y2", +d.cy_pos + +d.height)
            .attr('width', d.width)
            .attr('height', d.height)
            .attr('fill', d.color)
            .attr('stroke', d.color);
        shapes.exit().remove()
    }

    d3.csv(file, function (data) {
            Render(data);
        }
    ).then(data => Render_Broken(data))


</script>
</html>